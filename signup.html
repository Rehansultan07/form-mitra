// signup.html ke handleSignup function mein ye logic lagega
import { sendEmailVerification } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

window.handleSignup = () => {
    // ... baaki details collect karne ke baad
    createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
            const user = userCredential.user;
            
            // Email Verification bhej rahe hain
            sendEmailVerification(user).then(() => {
                set(ref(db, 'agents/' + user.uid), {
                    name, email, phone, address, 
                    status: "PendingVerification", // Tab tak login nahi hoga
                    joinedOn: new Date().toISOString()
                }).then(() => {
                    alert("Registration Successful! Please check your email and verify your account to login.");
                    window.location.href = "login.html";
                });
            });
        })
        .catch(err => alert(err.message));
};